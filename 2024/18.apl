'bsearch'⎕CY'dfns'
n ← 0j1 1∘(+/×)¨⍎¨f←⊃⎕NGET'in/18.txt'1
⍝D ← 7 ⋄ P1 ← 12
D ← 71 ⋄ P1 ← 1024

d ← 0j1 0j¯1 1 ¯1
E ← +/0j1 1×D-1
bfs ← {
    E∊⍵: ⍺
    ⍬≡⍵: 0
    s ← {⍵/⍨~∨⌿⍣2⊢D ¯1∘.=9 11∘.○⍵} (∪,⍵∘.+d)~⍺⍺
    ⍬≡s~⍵: 0
    (⍺+1)∇s∪⍵
}
⎕← (P1↑n)bfs⍨0
⎕← f⊃⍨¯1+{0=(⍵↑n)bfs⍨0} bsearch P1,≢n
