m ← 1+⎕A⍳   M←↑⊃⎕NGET'in/12.txt'1

m ← ⊢/¨{o n←⊃⍵[1;1] ⋄ O N←↓⍉↑(,⍵)/⍨9⍴⍳2 ⋄ ⊂o,⌊/n,N/⍨o=O}⌺3 3⍣≡⊢m,¨(⍴m)⍴1+⍳⍴,m
area ← {≢⍵}⌸∊m
peri ← m{+/⍵}⌸⍥,{≢⍵[1;1]~⍨(,⍵)/⍨9⍴⍳2}⌺3 3⊢m
mask ← ⊂¨(3 0 1)(1 2 5)(3 6 7)(5 8 7)
side ← m{+/⍵}⌸⍥,{+/0 2 5∊⍨2⊥¨⍵[1;1]=mask(⌷⍥,)¨⊂⍵}⌺3 3⊢m

⎕← area+.×peri
⎕← area+.×side
